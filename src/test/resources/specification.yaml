id: shopping-cart-validation
criteria:
  - id: minimum-order-value
    query: {order: {total: {$gte: 25.00}}}

  - id: customer-verified
    query: {customer: {verified: true}}

  - id: shipping-eligible
    query: {order: {shipping: {country: {$in: [US, CA, UK, AU]}}}}

  - id: items-in-stock
    query: {order: {items: {$elemMatch: {in_stock: true}}}}

criteriaGroups:
  - id: express-shipping-eligibility
    junction: AND
    criteria:
      - id: minimum-order-value
      - id: customer-verified
      - id: shipping-eligible
      - id: prime-member
        query: {customer: {membership: {$eq: PRIME}}}
